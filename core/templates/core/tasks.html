{% extends 'core/base.html' %}
{% block content %}
<h2>Your Tasks</h2>

<form method="POST" class="mb-3">
  {% csrf_token %}
  <div class="mb-2">
    <input type="text" name="title" placeholder="Task Title" class="form-control" required>
  </div>
  <div class="mb-2">
    <input type="date" name="due_date" class="form-control">
  </div>
  <button type="submit" class="btn btn-success mt-2">Add Task</button>
</form>

<hr>

<table class="table table-bordered mt-3">
  <thead class="table-success">
    <tr>
      <th>Task</th>
      <th>Status</th>
      <th>Due Date</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for task in tasks %}
    <tr>
      <td>{{ task.title }}</td>
      <td>
        {% if task.completed %}
          ✅ Completed
        {% else %}
          ⏳ Pending
        {% endif %}
      </td>
      <td>{{ task.due_date|default:"-" }}</td>
      <td>
        <a href="{% url 'task_toggle' task.id %}" class="btn btn-outline-primary btn-sm">Toggle</a>
        <a href="{% url 'delete_task' task.id %}" class="btn btn-outline-danger btn-sm">Delete</a>
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="4" class="text-center">No tasks yet</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
